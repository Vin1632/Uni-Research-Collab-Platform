{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Button,Alert}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useUserAuth}from\"../context/UserAuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChooseRole=()=>{const{setRole,user}=useUserAuth();const navigate=useNavigate();const[errorMessage,setErrorMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const email=user===null||user===void 0?void 0:user.email;useEffect(()=>{if(!email){navigate(\"/\");}},[email,navigate]);const handleRoleSelection=async role=>{const confirm=window.confirm(\"Are you sure you want to select the \".concat(role,\" role?\"));if(!confirm)return;try{setIsLoading(true);setRole(role);if(role===\"researcher\"){navigate(\"/researcher-signup\",{state:{email:email}});}else{navigate(\"/reviewer-signup\",{state:{email:email}});}}catch(error){console.error(\"Error selecting role:\",error);setErrorMessage(\"Failed to select role. Please try again.\");}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"main\",{className:\"page-wrapper\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"glass-box text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Choose Your Role\"}),errorMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errorMessage}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"btn-primary mb-3\",onClick:()=>handleRoleSelection(\"researcher\"),disabled:isLoading,\"aria-label\":\"Select Researcher Role\",children:isLoading?\"Loading...\":\"Researcher\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"btn-secondary\",onClick:()=>handleRoleSelection(\"reviewer\"),disabled:isLoading,\"aria-label\":\"Select Reviewer Role\",children:isLoading?\"Loading...\":\"Reviewer\"})]})});};export default ChooseRole;","map":{"version":3,"names":["React","useState","useEffect","Button","Alert","useNavigate","useUserAuth","jsx","_jsx","jsxs","_jsxs","ChooseRole","setRole","user","navigate","errorMessage","setErrorMessage","isLoading","setIsLoading","email","handleRoleSelection","role","confirm","window","concat","state","error","console","className","children","variant","onClick","disabled"],"sources":["C:/Users/pc/Desktop/recent/frontend/src/pages/ChooseRole.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button, Alert } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUserAuth } from \"../context/UserAuthContext\";\r\n\r\nconst ChooseRole = () => {\r\n  const { setRole, user } = useUserAuth();\r\n  const navigate = useNavigate();\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const email = user?.email;\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      navigate(\"/\"); \r\n    }\r\n  }, [email, navigate]);\r\n\r\n\r\n  const handleRoleSelection = async (role) => {\r\n    const confirm = window.confirm(`Are you sure you want to select the ${role} role?`);\r\n    if (!confirm) return;\r\n    try {\r\n      setIsLoading(true);\r\n      setRole(role); \r\n      if (role === \"researcher\") {\r\n        navigate(\"/researcher-signup\", { state: { email: email } });\r\n      } else {\r\n        navigate(\"/reviewer-signup\", { state: { email: email } });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error selecting role:\", error);\r\n      setErrorMessage(\"Failed to select role. Please try again.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"page-wrapper\">\r\n      \r\n      <section className=\"glass-box text-center\">\r\n        <h2>Choose Your Role</h2>\r\n        {errorMessage && <Alert variant=\"danger\">{errorMessage}</Alert>}\r\n        <Button\r\n          variant=\"primary\"\r\n          className=\"btn-primary mb-3\"\r\n          onClick={() => handleRoleSelection(\"researcher\")}\r\n          disabled={isLoading}\r\n          aria-label=\"Select Researcher Role\"\r\n        >\r\n          {isLoading ? \"Loading...\" : \"Researcher\"}\r\n        </Button>\r\n        <Button\r\n          variant=\"secondary\"\r\n          className=\"btn-secondary\"\r\n          onClick={() => handleRoleSelection(\"reviewer\")}\r\n          disabled={isLoading}\r\n          aria-label=\"Select Reviewer Role\"\r\n        >\r\n          {isLoading ? \"Loading...\" : \"Reviewer\"}\r\n        </Button>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ChooseRole;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,KAAK,KAAQ,iBAAiB,CAC/C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,OAAO,CAAEC,IAAK,CAAC,CAAGP,WAAW,CAAC,CAAC,CACvC,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAkB,KAAK,CAAGN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,CAEzBjB,SAAS,CAAC,IAAM,CACd,GAAI,CAACiB,KAAK,CAAE,CACVL,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,CAACK,KAAK,CAAEL,QAAQ,CAAC,CAAC,CAGrB,KAAM,CAAAM,mBAAmB,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC1C,KAAM,CAAAC,OAAO,CAAGC,MAAM,CAACD,OAAO,wCAAAE,MAAA,CAAwCH,IAAI,UAAQ,CAAC,CACnF,GAAI,CAACC,OAAO,CAAE,OACd,GAAI,CACFJ,YAAY,CAAC,IAAI,CAAC,CAClBN,OAAO,CAACS,IAAI,CAAC,CACb,GAAIA,IAAI,GAAK,YAAY,CAAE,CACzBP,QAAQ,CAAC,oBAAoB,CAAE,CAAEW,KAAK,CAAE,CAAEN,KAAK,CAAEA,KAAM,CAAE,CAAC,CAAC,CAC7D,CAAC,IAAM,CACLL,QAAQ,CAAC,kBAAkB,CAAE,CAAEW,KAAK,CAAE,CAAEN,KAAK,CAAEA,KAAM,CAAE,CAAC,CAAC,CAC3D,CACF,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CV,eAAe,CAAC,0CAA0C,CAAC,CAC7D,CAAC,OAAS,CACRE,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEV,IAAA,SAAMoB,SAAS,CAAC,cAAc,CAAAC,QAAA,cAE5BnB,KAAA,YAASkB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACxCrB,IAAA,OAAAqB,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACxBd,YAAY,eAAIP,IAAA,CAACJ,KAAK,EAAC0B,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEd,YAAY,CAAQ,CAAC,cAC/DP,IAAA,CAACL,MAAM,EACL2B,OAAO,CAAC,SAAS,CACjBF,SAAS,CAAC,kBAAkB,CAC5BG,OAAO,CAAEA,CAAA,GAAMX,mBAAmB,CAAC,YAAY,CAAE,CACjDY,QAAQ,CAAEf,SAAU,CACpB,aAAW,wBAAwB,CAAAY,QAAA,CAElCZ,SAAS,CAAG,YAAY,CAAG,YAAY,CAClC,CAAC,cACTT,IAAA,CAACL,MAAM,EACL2B,OAAO,CAAC,WAAW,CACnBF,SAAS,CAAC,eAAe,CACzBG,OAAO,CAAEA,CAAA,GAAMX,mBAAmB,CAAC,UAAU,CAAE,CAC/CY,QAAQ,CAAEf,SAAU,CACpB,aAAW,sBAAsB,CAAAY,QAAA,CAEhCZ,SAAS,CAAG,YAAY,CAAG,UAAU,CAChC,CAAC,EACF,CAAC,CACN,CAAC,CAEX,CAAC,CAED,cAAe,CAAAN,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}