{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Form,Button,Alert}from\"react-bootstrap\";import{FaPencilAlt,FaUserCircle}from\"react-icons/fa\";import{get_profile_data,update_profile_data}from\"../services/profileService\";import Header from\"../components/Header\";// Adjust path if needed\nimport\"../styles/profile.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{const[form,setForm]=useState({name:\"\",institution:\"\",qualification:\"\",interests:\"\"});const[message,setMessage]=useState(null);const[editMode,setEditMode]=useState({name:false,institution:false,qualification:false,interests:false});const[errors,setErrors]=useState({name:\"\",institution:\"\",qualification:\"\",interests:\"\"});const user=JSON.parse(localStorage.getItem(\"user\"));const email=user===null||user===void 0?void 0:user.email;useEffect(()=>{if(!email)return;get_profile_data(email).then(data=>{setForm({name:data.name||\"\",institution:data.institution||\"\",qualification:data.qualification||\"\",interests:data.interests||\"\"});}).catch(err=>console.error(\"Failed to fetch profile:\",err));},[email]);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const validateForm=()=>{const newErrors={name:\"\",institution:\"\",qualification:\"\",interests:\"\"};if(!form.name||form.name.length<3){newErrors.name=\"Name must be at least 3 characters.\";}if(!form.institution){newErrors.institution=\"Institution is required.\";}if(!form.qualification){newErrors.qualification=\"Qualification is required.\";}if(!form.interests||form.interests.length<5){newErrors.interests=\"Interests must be at least 5 characters.\";}setErrors(newErrors);return!Object.values(newErrors).some(error=>error!==\"\");};const handleSubmit=e=>{e.preventDefault();if(!email){setMessage(\"Email is required.\");return;}if(!validateForm()){setMessage(\"Please correct the errors in the form.\");return;}update_profile_data({...form,email}).then(data=>setMessage(data.message)).catch(()=>setMessage(\"Error updating profile.\"));};const handleEdit=field=>{setEditMode({...editMode,[field]:true});};const handleSave=e=>{e.preventDefault();setEditMode({name:false,institution:false,qualification:false,interests:false});handleSubmit(e);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"form-container\",style:{width:\"100%\",maxWidth:\"700px\",margin:\"0 auto\",padding:\"30px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(FaUserCircle,{size:100,color:\"#c6e3ff\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"edit-profile\",color:\"#c6e3ff\",children:\"Edit Profile\"})]}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSave,children:[[\"name\",\"institution\",\"qualification\",\"interests\"].map(field=>/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[field.charAt(0).toUpperCase()+field.slice(1),/*#__PURE__*/_jsx(FaPencilAlt,{style:{cursor:\"pointer\",marginLeft:\"10px\"},onClick:()=>handleEdit(field)})]}),/*#__PURE__*/_jsx(Form.Control,{as:field===\"interests\"?\"textarea\":\"input\",type:\"text\",name:field,value:form[field],onChange:handleChange,disabled:!editMode[field],isInvalid:!!errors[field]}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors[field]})]},field)),/*#__PURE__*/_jsx(Button,{className:\"mt-3\",type:\"submit\",disabled:!Object.values(editMode).includes(true),children:\"Save Changes\"}),message&&/*#__PURE__*/_jsx(Alert,{className:\"mt-3\",children:message})]})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Alert","FaPencilAlt","FaUserCircle","get_profile_data","update_profile_data","Header","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","form","setForm","name","institution","qualification","interests","message","setMessage","editMode","setEditMode","errors","setErrors","user","JSON","parse","localStorage","getItem","email","then","data","catch","err","console","error","handleChange","e","target","value","validateForm","newErrors","length","Object","values","some","handleSubmit","preventDefault","handleEdit","field","handleSave","children","className","style","width","maxWidth","margin","padding","size","color","onSubmit","map","Group","Label","charAt","toUpperCase","slice","cursor","marginLeft","onClick","Control","as","type","onChange","disabled","isInvalid","Feedback","includes"],"sources":["/home/vin/Desktop/Practice/Projects/SDP PROJECT/Projects 3/Uni-Research-Collab-Platform/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\nimport { FaPencilAlt, FaUserCircle } from \"react-icons/fa\";\nimport { get_profile_data, update_profile_data } from \"../services/profileService\";\nimport Header from \"../components/Header\"; // Adjust path if needed\nimport \"../styles/profile.css\";\n\nconst Profile = () => {\n  const [form, setForm] = useState({\n    name: \"\",\n    institution: \"\",\n    qualification: \"\",\n    interests: \"\"\n  });\n  const [message, setMessage] = useState(null);\n  const [editMode, setEditMode] = useState({\n    name: false,\n    institution: false,\n    qualification: false,\n    interests: false\n  });\n  const [errors, setErrors] = useState({\n    name: \"\",\n    institution: \"\",\n    qualification: \"\",\n    interests: \"\"\n  });\n\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const email = user?.email;\n\n  useEffect(() => {\n    if (!email) return;\n    get_profile_data(email)\n      .then(data => {\n        setForm({\n          name: data.name || \"\",\n          institution: data.institution || \"\",\n          qualification: data.qualification || \"\",\n          interests: data.interests || \"\"\n        });\n      })\n      .catch(err => console.error(\"Failed to fetch profile:\", err));\n  }, [email]);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const validateForm = () => {\n    const newErrors = { name: \"\", institution: \"\", qualification: \"\", interests: \"\" };\n\n    if (!form.name || form.name.length < 3) {\n      newErrors.name = \"Name must be at least 3 characters.\";\n    }\n    if (!form.institution) {\n      newErrors.institution = \"Institution is required.\";\n    }\n    if (!form.qualification) {\n      newErrors.qualification = \"Qualification is required.\";\n    }\n    if (!form.interests || form.interests.length < 5) {\n      newErrors.interests = \"Interests must be at least 5 characters.\";\n    }\n\n    setErrors(newErrors);\n    return !Object.values(newErrors).some((error) => error !== \"\");\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!email) {\n      setMessage(\"Email is required.\");\n      return;\n    }\n\n    if (!validateForm()) {\n      setMessage(\"Please correct the errors in the form.\");\n      return;\n    }\n\n    update_profile_data({ ...form, email })\n      .then((data) => setMessage(data.message))\n      .catch(() => setMessage(\"Error updating profile.\"));\n  };\n\n  const handleEdit = (field) => {\n    setEditMode({ ...editMode, [field]: true });\n  };\n\n  const handleSave = (e) => {\n    e.preventDefault();\n    setEditMode({\n      name: false,\n      institution: false,\n      qualification: false,\n      interests: false\n    });\n    handleSubmit(e);\n  };\n\n  return (\n    <>\n      <Header />\n      <section className=\"form-container\" style={{ width: \"100%\", maxWidth: \"700px\", margin: \"0 auto\", padding: \"30px\" }}>\n        <div className=\"text-center mb-4\">\n          <FaUserCircle size={100} color=\"#c6e3ff\" />\n          <h3 className=\"edit-profile\" color=\"#c6e3ff\" >Edit Profile</h3>\n        </div>\n        <Form onSubmit={handleSave}>\n          {[\"name\", \"institution\", \"qualification\", \"interests\"].map((field) => (\n            <Form.Group key={field} className=\"mb-3\">\n              <Form.Label>\n                {field.charAt(0).toUpperCase() + field.slice(1)}\n                <FaPencilAlt\n                  style={{ cursor: \"pointer\", marginLeft: \"10px\" }}\n                  onClick={() => handleEdit(field)}\n                />\n              </Form.Label>\n              <Form.Control\n                as={field === \"interests\" ? \"textarea\" : \"input\"}\n                type=\"text\"\n                name={field}\n                value={form[field]}\n                onChange={handleChange}\n                disabled={!editMode[field]}\n                isInvalid={!!errors[field]}\n              />\n              <Form.Control.Feedback type=\"invalid\">\n                {errors[field]}\n              </Form.Control.Feedback>\n            </Form.Group>\n          ))}\n          <Button className=\"mt-3\" type=\"submit\" disabled={!Object.values(editMode).includes(true)}>\n            Save Changes\n          </Button>\n          {message && <Alert className=\"mt-3\">{message}</Alert>}\n        </Form>\n      </section>\n    </>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}