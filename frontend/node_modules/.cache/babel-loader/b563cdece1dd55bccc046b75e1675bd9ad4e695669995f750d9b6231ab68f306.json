{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Button,Alert}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useUserAuth}from\"../context/UserAuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChooseRole=()=>{const{setRole,user}=useUserAuth();const navigate=useNavigate();const[errorMessage,setErrorMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const email=user===null||user===void 0?void 0:user.email;useEffect(()=>{if(!email){navigate(\"/\");}},[email,navigate]);const handleRoleSelection=async role=>{const confirm=window.confirm(`Are you sure you want to select the ${role} role?`);if(!confirm)return;try{setIsLoading(true);setRole(role);if(role===\"researcher\"){navigate(\"/researcher-signup\",{state:{email:email}});}else{navigate(\"/reviewer-signup\",{state:{email:email}});}}catch(error){console.error(\"Error selecting role:\",error);setErrorMessage(\"Failed to select role. Please try again.\");}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"main\",{className:\"page-wrapper\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"glass-box text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Choose Your Role\"}),errorMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errorMessage}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"btn-primary mb-3\",onClick:()=>handleRoleSelection(\"researcher\"),disabled:isLoading,\"aria-label\":\"Select Researcher Role\",children:isLoading?\"Loading...\":\"Researcher\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"btn-secondary\",onClick:()=>handleRoleSelection(\"reviewer\"),disabled:isLoading,\"aria-label\":\"Select Reviewer Role\",children:isLoading?\"Loading...\":\"Reviewer\"})]})});};export default ChooseRole;","map":{"version":3,"names":["React","useState","useEffect","Button","Alert","useNavigate","useUserAuth","jsx","_jsx","jsxs","_jsxs","ChooseRole","setRole","user","navigate","errorMessage","setErrorMessage","isLoading","setIsLoading","email","handleRoleSelection","role","confirm","window","state","error","console","className","children","variant","onClick","disabled"],"sources":["/home/vin/Desktop/Practice/Projects/SDP PROJECT/Projects 3/Uni-Research-Collab-Platform/frontend/src/pages/ChooseRole.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, Alert } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useUserAuth } from \"../context/UserAuthContext\";\n\nconst ChooseRole = () => {\n  const { setRole, user } = useUserAuth();\n  const navigate = useNavigate();\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const email = user?.email;\n\n  useEffect(() => {\n    if (!email) {\n      navigate(\"/\"); \n    }\n  }, [email, navigate]);\n\n\n  const handleRoleSelection = async (role) => {\n    const confirm = window.confirm(`Are you sure you want to select the ${role} role?`);\n    if (!confirm) return;\n    try {\n      setIsLoading(true);\n      setRole(role); \n      if (role === \"researcher\") {\n        navigate(\"/researcher-signup\", { state: { email: email } });\n      } else {\n        navigate(\"/reviewer-signup\", { state: { email: email } });\n      }\n    } catch (error) {\n      console.error(\"Error selecting role:\", error);\n      setErrorMessage(\"Failed to select role. Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"page-wrapper\">\n      \n      <section className=\"glass-box text-center\">\n        <h2>Choose Your Role</h2>\n        {errorMessage && <Alert variant=\"danger\">{errorMessage}</Alert>}\n        <Button\n          variant=\"primary\"\n          className=\"btn-primary mb-3\"\n          onClick={() => handleRoleSelection(\"researcher\")}\n          disabled={isLoading}\n          aria-label=\"Select Researcher Role\"\n        >\n          {isLoading ? \"Loading...\" : \"Researcher\"}\n        </Button>\n        <Button\n          variant=\"secondary\"\n          className=\"btn-secondary\"\n          onClick={() => handleRoleSelection(\"reviewer\")}\n          disabled={isLoading}\n          aria-label=\"Select Reviewer Role\"\n        >\n          {isLoading ? \"Loading...\" : \"Reviewer\"}\n        </Button>\n      </section>\n    </main>\n  );\n};\n\nexport default ChooseRole;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,KAAK,KAAQ,iBAAiB,CAC/C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,OAAO,CAAEC,IAAK,CAAC,CAAGP,WAAW,CAAC,CAAC,CACvC,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAkB,KAAK,CAAGN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,KAAK,CAEzBjB,SAAS,CAAC,IAAM,CACd,GAAI,CAACiB,KAAK,CAAE,CACVL,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,CAACK,KAAK,CAAEL,QAAQ,CAAC,CAAC,CAGrB,KAAM,CAAAM,mBAAmB,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC1C,KAAM,CAAAC,OAAO,CAAGC,MAAM,CAACD,OAAO,CAAC,uCAAuCD,IAAI,QAAQ,CAAC,CACnF,GAAI,CAACC,OAAO,CAAE,OACd,GAAI,CACFJ,YAAY,CAAC,IAAI,CAAC,CAClBN,OAAO,CAACS,IAAI,CAAC,CACb,GAAIA,IAAI,GAAK,YAAY,CAAE,CACzBP,QAAQ,CAAC,oBAAoB,CAAE,CAAEU,KAAK,CAAE,CAAEL,KAAK,CAAEA,KAAM,CAAE,CAAC,CAAC,CAC7D,CAAC,IAAM,CACLL,QAAQ,CAAC,kBAAkB,CAAE,CAAEU,KAAK,CAAE,CAAEL,KAAK,CAAEA,KAAM,CAAE,CAAC,CAAC,CAC3D,CACF,CAAE,MAAOM,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CT,eAAe,CAAC,0CAA0C,CAAC,CAC7D,CAAC,OAAS,CACRE,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEV,IAAA,SAAMmB,SAAS,CAAC,cAAc,CAAAC,QAAA,cAE5BlB,KAAA,YAASiB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACxCpB,IAAA,OAAAoB,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACxBb,YAAY,eAAIP,IAAA,CAACJ,KAAK,EAACyB,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEb,YAAY,CAAQ,CAAC,cAC/DP,IAAA,CAACL,MAAM,EACL0B,OAAO,CAAC,SAAS,CACjBF,SAAS,CAAC,kBAAkB,CAC5BG,OAAO,CAAEA,CAAA,GAAMV,mBAAmB,CAAC,YAAY,CAAE,CACjDW,QAAQ,CAAEd,SAAU,CACpB,aAAW,wBAAwB,CAAAW,QAAA,CAElCX,SAAS,CAAG,YAAY,CAAG,YAAY,CAClC,CAAC,cACTT,IAAA,CAACL,MAAM,EACL0B,OAAO,CAAC,WAAW,CACnBF,SAAS,CAAC,eAAe,CACzBG,OAAO,CAAEA,CAAA,GAAMV,mBAAmB,CAAC,UAAU,CAAE,CAC/CW,QAAQ,CAAEd,SAAU,CACpB,aAAW,sBAAsB,CAAAW,QAAA,CAEhCX,SAAS,CAAG,YAAY,CAAG,UAAU,CAChC,CAAC,EACF,CAAC,CACN,CAAC,CAEX,CAAC,CAED,cAAe,CAAAN,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}