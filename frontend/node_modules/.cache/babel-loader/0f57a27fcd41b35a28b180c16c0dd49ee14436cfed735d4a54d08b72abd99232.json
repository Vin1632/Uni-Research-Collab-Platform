{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import Header from\"../components/Header\";import{FaImage}from\"react-icons/fa\";import{get_each_project_data}from\"../services/proposal_service\";import'../styles/proposal_details.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProjectDetails(){var _location$state;const location=useLocation();const project_id=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.project_id;const[ProjectData,setProjectData]=useState([]);useEffect(()=>{const fetchProjectdata=async()=>{try{if(project_id){const project_data=await get_each_project_data(project_id);setProjectData(project_data[0]);}else{console.log(\"Project_ID Doesnt Exist for the project\");}}catch(err){console.error(\"Failed to fetch Projects\",err);}};fetchProjectdata();},[project_id]);return/*#__PURE__*/_jsxs(\"main\",{className:\"dashboard-wrapper\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"section\",{className:\"dashboard-container\",children:/*#__PURE__*/_jsx(ProposalCard,{proposal:ProjectData},ProjectData.project_id)})]});}function ProposalCard(_ref){let{proposal}=_ref;const[imgError,setImgError]=useState(false);const isImageValid=proposal.link_image&&proposal.link_image.trim()!==\"\"&&!imgError;return/*#__PURE__*/_jsxs(\"main\",{className:\"proposal-main\",children:[isImageValid?/*#__PURE__*/_jsx(\"img\",{src:proposal.link_image,onError:()=>{console.warn(\"Image failed to load:\",proposal.link_image);setImgError(true);},alt:proposal.title,className:\"proposal-data-image\"}):/*#__PURE__*/_jsx(\"div\",{className:\"proposal-image fallback-icon\",children:/*#__PURE__*/_jsx(FaImage,{size:48,color:\"#aaa\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"proposal-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"proposal-title\",children:proposal.title}),/*#__PURE__*/_jsx(\"p\",{className:\"proposal-summary\",children:proposal.requirements}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Funding Source:\"}),\" \",proposal.funding_source]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Funds: R\"}),\" \",proposal.funds]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Funds Spent: R\"}),\" \",proposal.funds_spent]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Start Date:\"}),\" \",proposal.start_date]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"End Date:\"}),\" \",proposal.end_date]}),/*#__PURE__*/_jsxs(\"div\",{className:\"proposal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-message\",children:\"Message\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-invite\",children:\"Invite\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useLocation","Header","FaImage","get_each_project_data","jsx","_jsx","jsxs","_jsxs","ProjectDetails","_location$state","location","project_id","state","ProjectData","setProjectData","fetchProjectdata","project_data","console","log","err","error","className","children","ProposalCard","proposal","_ref","imgError","setImgError","isImageValid","link_image","trim","src","onError","warn","alt","title","size","color","requirements","funding_source","funds","funds_spent","start_date","end_date"],"sources":["/home/vin/Desktop/Practice/Projects/SDP PROJECT/Projects 3/Uni-Research-Collab-Platform/frontend/src/pages/project_details.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport Header from \"../components/Header\";\nimport { FaImage } from \"react-icons/fa\"; \nimport { get_each_project_data } from \"../services/proposal_service\";\nimport '../styles/proposal_details.css';\n\nexport default function ProjectDetails() {\n  const location = useLocation();\n  const project_id = location.state?.project_id;\n\n  const [ProjectData, setProjectData] = useState([]);\n  useEffect(() => {\n    const fetchProjectdata = async () => {\n      try {\n        if (project_id) { \n          const project_data = await get_each_project_data(project_id);\n          setProjectData(project_data[0]);\n          \n        }\n        else{\n          console.log(\"Project_ID Doesnt Exist for the project\");\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch Projects\", err);\n      }\n    };\n\n    fetchProjectdata();\n  }, [project_id]); \n\n  return (\n    <main className=\"dashboard-wrapper\">\n      <Header /> \n      \n      <section className=\"dashboard-container\">\n        <ProposalCard\n            key={ProjectData.project_id}\n            proposal={ProjectData}\n           \n          />\n      </section>\n    </main>\n  );\n}\n\nfunction ProposalCard({ proposal }) {\n  const [imgError, setImgError] = useState(false);\n\n  const isImageValid = proposal.link_image && proposal.link_image.trim() !== \"\" && !imgError;\n\n  return (\n    <main className=\"proposal-main\">\n      {isImageValid ? (\n        <img\n          src={proposal.link_image}\n          onError={() => {\n            console.warn(\"Image failed to load:\", proposal.link_image);\n            setImgError(true);\n          }}\n          alt={proposal.title}\n          className=\"proposal-data-image\"\n        />\n      ) : (\n        <div className=\"proposal-image fallback-icon\">\n          <FaImage size={48} color=\"#aaa\" />\n        </div>\n      )}\n\n      <div className=\"proposal-info\">\n        <h3 className=\"proposal-title\">{proposal.title}</h3>\n        <p className=\"proposal-summary\">{proposal.requirements}</p>\n        <p><strong>Funding Source:</strong> {proposal.funding_source}</p>\n        <p><strong>Funds: R</strong> {proposal.funds}</p>\n        <p><strong>Funds Spent: R</strong> {proposal.funds_spent}</p>\n        <p><strong>Start Date:</strong> {proposal.start_date}</p>\n        <p><strong>End Date:</strong> {proposal.end_date}</p>\n        <div className=\"proposal-buttons\">\n          <button className=\"btn-message\">Message</button>\n          <button className=\"btn-invite\">Invite</button>\n        </div>\n      </div>\n    </main>\n  );\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}