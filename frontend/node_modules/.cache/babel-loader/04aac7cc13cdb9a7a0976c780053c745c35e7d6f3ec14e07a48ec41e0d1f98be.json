{"ast":null,"code":"// src/admin_wrapper/FlaggedProjects.js\nimport React,{useEffect,useState}from\"react\";import{get_flagged_projects,delete_flag}from\"../services/admin_service\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FlaggedProjects(){const[flaggedProjects,setFlaggedProjects]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[deletingId,setDeletingId]=useState(null);// for disable button while deleting\nuseEffect(()=>{async function fetchFlagged(){try{const data=await get_flagged_projects();setFlaggedProjects(data);}catch(err){setError(err.message||\"Failed to fetch flagged projects\");}finally{setLoading(false);}}fetchFlagged();},[]);async function handleDelete(flag_id){if(!window.confirm(\"Are you sure you want to unflag/delete this entry?\"))return;try{setDeletingId(flag_id);await delete_flag(flag_id);// Remove deleted flag from the state list\nsetFlaggedProjects(prev=>prev.filter(f=>f.flag_id!==flag_id));}catch(err){alert(err.message||\"Failed to delete flag\");}finally{setDeletingId(null);}}if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading flagged projects...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[\"Error: \",error]});if(flaggedProjects.length===0)return/*#__PURE__*/_jsx(\"p\",{children:\"No flagged projects found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"flagged-projects-list\",children:flaggedProjects.map(_ref=>{let{flag_id,project_id,reason,description,flagged_at,title}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"flagged-project-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason:\"}),\" \",reason]}),description&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",description]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Flagged at: \",new Date(flagged_at).toLocaleString()]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(flag_id),disabled:deletingId===flag_id,className:\"flag-delete-button\",children:deletingId===flag_id?\"Deleting...\":\"Unflag / Delete\"})]},flag_id);})});}","map":{"version":3,"names":["React","useEffect","useState","get_flagged_projects","delete_flag","jsx","_jsx","jsxs","_jsxs","FlaggedProjects","flaggedProjects","setFlaggedProjects","loading","setLoading","error","setError","deletingId","setDeletingId","fetchFlagged","data","err","message","handleDelete","flag_id","window","confirm","prev","filter","f","alert","children","style","color","length","className","map","_ref","project_id","reason","description","flagged_at","title","Date","toLocaleString","onClick","disabled"],"sources":["C:/Users/pc/Desktop/recent/frontend/src/admin_wrapper/FlaggedProjects.js"],"sourcesContent":["// src/admin_wrapper/FlaggedProjects.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { get_flagged_projects, delete_flag } from \"../services/admin_service\";\r\n\r\nexport default function FlaggedProjects() {\r\n  const [flaggedProjects, setFlaggedProjects] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [deletingId, setDeletingId] = useState(null); // for disable button while deleting\r\n\r\n  useEffect(() => {\r\n    async function fetchFlagged() {\r\n      try {\r\n        const data = await get_flagged_projects();\r\n        setFlaggedProjects(data);\r\n      } catch (err) {\r\n        setError(err.message || \"Failed to fetch flagged projects\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchFlagged();\r\n  }, []);\r\n\r\n  async function handleDelete(flag_id) {\r\n    if (!window.confirm(\"Are you sure you want to unflag/delete this entry?\")) return;\r\n\r\n    try {\r\n      setDeletingId(flag_id);\r\n      await delete_flag(flag_id);\r\n      // Remove deleted flag from the state list\r\n      setFlaggedProjects((prev) => prev.filter(f => f.flag_id !== flag_id));\r\n    } catch (err) {\r\n      alert(err.message || \"Failed to delete flag\");\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  }\r\n\r\n  if (loading) return <p>Loading flagged projects...</p>;\r\n  if (error) return <p style={{ color: \"red\" }}>Error: {error}</p>;\r\n\r\n  if (flaggedProjects.length === 0) return <p>No flagged projects found.</p>;\r\n\r\n  return (\r\n    <div className=\"flagged-projects-list\">\r\n      {flaggedProjects.map(({ flag_id, project_id, reason, description, flagged_at, title }) => (\r\n        <div key={flag_id} className=\"flagged-project-card\">\r\n          <h3>{title}</h3>\r\n          <p><strong>Reason:</strong> {reason}</p>\r\n          {description && <p><strong>Description:</strong> {description}</p>}\r\n          <p><small>Flagged at: {new Date(flagged_at).toLocaleString()}</small></p>\r\n          <button\r\n            onClick={() => handleDelete(flag_id)}\r\n            disabled={deletingId === flag_id}\r\n            className=\"flag-delete-button\"\r\n          >\r\n            {deletingId === flag_id ? \"Deleting...\" : \"Unflag / Delete\"}\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}